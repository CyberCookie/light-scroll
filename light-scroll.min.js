function init(a){function b(q,r){var{clientHeight:s,scrollHeight:t,classList:u}=r;s==t?u.add('scroll-dissabled'):u.remove('scroll-dissabled');var v=q.parentNode.clientHeight,w=v*s/t,x=Math.ceil((v-w)*(p/(t-s)));return q.style.height=w+'px',{maxHeight:v,height:w,_kw_deltaTop:x}}function f(q,r){var s=document.createElement('div');return s.classList.add('scroll-bar'),s.innerHTML+='<div class="scroll" data-scroll-id="'+r+'"></div>',q.appendChild(s),q.setAttribute('data-scroll',r),s.firstChild}function g(q,r,s,t=!0){let{scroll:u,container:v}=s;v.scrollTop=t?r:v.scrollTop+=r,u.style.top=q+'px',u.parentNode.style['margin-top']=v.scrollTop+'px',s.top=q}function h(q,r){if(r.container.classList.contains('scroll-dissabled'))return!1;o&&q.preventDefault(),q.stopPropagation();let{scroll:s,height:t,maxHeight:u,top:v,_kw_deltaTop:w,container:x}=r,y=p,z=v;0>q.deltaY||38==q.keyCode||33==q.keyCode?(z-=w,0>z?g(0,0,r):g(z,-y,r,!1)):(0<q.deltaY||40==q.keyCode||34==q.keyCode)&&(z+=w,z+t>u?g(Math.ceil(u-t),x.scrollHeight,r):g(z,y,r,!1))}function j(q){h(q,n)}function k(q){function s(w){w.stopPropagation();var{height:x,top:y,maxHeight:z,container:A}=q,B=y+w.movementY,C=A.scrollHeight;0<B&&B+x<z?C=Math.ceil(A.scrollHeight*(B/z)):B=0>=B?C=0:Math.ceil(z-x),g(B,C,q)}var{scroll:u,container:v}=q;u.addEventListener('mousedown',()=>{window.addEventListener('mousemove',s,!1),window.addEventListener('mouseup',function(){this.removeEventListener('mousemove',s)},!1)},!1),u.parentNode.addEventListener('click',function(w){w.stopPropagation();let{height:x,maxHeight:y,container:z}=q;if(w.target!=u){var A=w.offsetY/y,B=Math.ceil((z.scrollHeight-z.clientHeight)*A),C=Math.ceil((y-x)*A);g(C,B,q)}},!1),v.addEventListener('wheel',function(w){h(w,q)},!o&&{passive:!0}),v.addEventListener('click',w=>{w.stopPropagation(),n=q,window.addEventListener('keydown',j,!1)},!1)}if(function(){try{return document.createEvent('TouchEvent')}catch(q){return!1}}())return!1;var l=document.querySelectorAll('[data-scroll]'),m=[],n={},o=window.navigator.userAgent.includes('Edge'),{scroll_speed:p}=a;for(let q=0;q<l.length;q++){let{scrollHeight:r,clientHeight:s}=l[q],t=f(l[q],q),u=l[q],{maxHeight:w,height:x,_kw_deltaTop:y}=b(t,u);u.style['overflow-y']='hidden',m[q]={scroll:t,top:0,height:x,container:u,maxHeight:w,_kw_deltaTop:y},k(m[q])}return function(q){var r=m[q.dataset.scroll];r.scroll.parentNode.style['margin-top']='0px';var{maxHeight:s,height:t,_kw_scrollTop:u}=b(r.scroll,q);Object.assign(r,{maxHeight:s,height:t,_kw_scrollTop:u}),r.top+t>s&&(r.top=s-t,r.scroll.style.top=r.top+'px'),r.scroll.parentNode.style['margin-top']=q.scrollTop+'px'}}module.exports=init;